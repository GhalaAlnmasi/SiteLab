{% load portfolio_extras %}

<style>
/* ===== GENERAL ===== */
:root {
    --grad-1: #6A11CB;
    --grad-2: #2575FC;
    --text-dark: #1f2937;
    --text-light: #6b7280;
    --card-bg: #ffffff;
    --radius: 16px;
    --transition: .25s ease;
}

body {
    font-family: 'Inter', 'SF Pro', system-ui, sans-serif;
}

/* ===== HERO SECTION (RESPONSIVE) ===== */
.hero-wrapper {
    width: 100%;
    padding: 80px 20px 60px;
    text-align: center;
    color: white;
    background: linear-gradient(135deg, var(--grad-1), var(--grad-2));
    border-radius: 0 0 40px 40px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.25);
}

/* Avatar */
.hero-avatar {
    width: 130px;
    height: 130px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid white;
    box-shadow: 0px 6px 20px rgba(255,255,255,0.4);
}

/* Name */
.hero-name {
    font-size: 2.8rem;
    font-weight: 800;
    margin-top: 18px;
}

/* Tagline */
.hero-tagline {
    margin-top: 10px;
    font-size: 1.2rem;
    opacity: 0.95;
}

/* About */
.hero-about {
    max-width: 750px;
    margin: 20px auto 0;
    font-size: 1rem;
    opacity: 0.9;
    line-height: 1.7;
}

/* SOCIAL (unchanged) */
.social-btn {
    background: rgba(255,255,255,0.20);
    backdrop-filter: blur(6px);
    color: white;
    padding: 8px 16px;
    border-radius: 999px;
    font-size: 0.9rem;
    border: 1px solid rgba(255,255,255,0.3);
    transition: var(--transition);
}
.social-btn:hover {
    background: rgba(255,255,255,0.35);
}

/* ===== MEDIA QUERIES ===== */

/* --- Large phones (max-width 550px) --- */
@media (max-width: 550px) {
    .hero-wrapper {
        padding: 60px 15px 40px;
    }

    .hero-avatar {
        width: 100px;
        height: 100px;
    }

    .hero-name {
        font-size: 2rem;
    }

    .hero-tagline {
        font-size: 1rem;
    }

    .hero-about {
        font-size: 0.9rem;
        max-width: 90%;
    }

    .social-btn {
        width: 100%;
        justify-content: center;
        display: inline-flex;
        margin-top: 6px;
    }
}

/* --- Very small screens (max-width: 380px) --- */
@media (max-width: 380px) {
    .hero-name {
        font-size: 1.7rem;
    }
    .hero-avatar {
        width: 85px;
        height: 85px;
    }
}
/* ===== HERO LAYOUT NEW ===== */
.hero-top {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
}

.hero-left,
.hero-right {
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* جعل النصوص بمحاذاة يسار فقط على الشاشات الكبيرة */
.hero-right {
    text-align: center;
}

/* الصف الثاني */
.hero-bottom {
    margin-top: 10px;
}

/* Desktop layout */
@media (min-width: 768px) {
    .hero-top {
        flex-direction: row;
        justify-content: center;
        gap: 50px;
    }

    .hero-right {
        text-align: left;
        align-items: flex-start;
    }

    .hero-wrapper {
        padding: 100px 40px 70px;
    }

    .hero-about {
        max-width: 700px;
        margin-top: 15px;
        text-align: center;
    }
}


/* ===== SOCIAL ===== */
.social-btn {
    background: rgba(255,255,255,0.20);
    backdrop-filter: blur(6px);
    color: white;
    padding: 8px 16px;
    border-radius: 999px;
    font-size: 0.9rem;
    border: 1px solid rgba(255,255,255,0.3);
    transition: var(--transition);
}
.social-btn:hover {
    background: rgba(255,255,255,0.35);
}

/* ===== PROJECTS GRID ===== */
.projects-section {
    padding: 60px 20px;
    max-width: 1100px;
    margin: 0 auto;
    text-align: center;
}

.project-card {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 22px;
    text-align: left;
    box-shadow: 0 8px 25px rgba(0,0,0,0.10);
    transition: var(--transition);
    height: 100%;
}
.project-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 35px rgba(0,0,0,0.15);
}

.project-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-dark);
}

.project-desc {
    color: var(--text-light);
    font-size: .95rem;
    margin-top: 6px;
}

.project-btn {
    margin-top: 12px;
    background: linear-gradient(135deg, var(--grad-1), var(--grad-2));
    color: white !important;
    border-radius: 10px;
    padding: 8px 14px;
    display: inline-block;
    transition: var(--transition);
}
.project-btn:hover {
    opacity: .85;
}

/* ===== CONTACT FORM ===== */
.contact-wrapper {
    max-width: 700px;
    margin: 0 auto 60px;
    background: var(--card-bg);
    padding: 30px;
    border-radius: var(--radius);
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.contact-wrapper h3 {
    margin-bottom: 10px;
    font-weight: 700;
}

.contact-wrapper p {
    color: var(--text-light);
    font-size: 0.9rem;
}

/* Flex utilities */
.d-flex { display: flex; }
.flex-wrap { flex-wrap: wrap; }
.justify-content-center { justify-content: center; }
.align-items-center { align-items: center; }

/* Margin + padding utilities */
.mt-5 { margin-top: 3rem; }
.mt-3 { margin-top: 1rem; }
.mb-3 { margin-bottom: 1rem; }

/* Button 100% width */
.w-100 { width: 100%; }

/* Gap utility */
.gap-2 { gap: .5rem; }

/* Grid replacement for row + col-md-4 */
.row {
    display: flex;
    flex-wrap: wrap;
    margin: -15px;
}
.col-md-4 {
    width: 100%;
    padding: 12px;
}
@media (min-width: 768px) {
    .col-md-4 {
        width: 33.333%;
    }
}

/* Gutter replacement */
.g-4 {
    gap: 1.5rem;
}

/* Text muted */
.text-muted {
    color: #6b7280 !important;
}

/* fw-bold */
.fw-bold { font-weight: 700; }

/* mb-5 */
.mb-5 { margin-bottom: 3rem; }

/* ===== FOOTER ===== */
.footer {
    text-align: center;
    padding: 30px 0 20px;
    font-size: 0.85rem;
    color: #9ca3af;
}
</style>

<!-- ========== HERO SECTION ========== -->
<section class="hero-wrapper">

    <!-- ===== TOP ROW ===== -->
    <div class="hero-top">

        <!-- LEFT (Avatar) -->
        <div class="hero-left">
            {% if portfolio.avatar %}
            <img src="{{ portfolio.avatar.url }}"
                class="hero-avatar"
                data-field="avatar">
            {% endif %}
        </div>

        <!-- RIGHT (Name + Tagline) -->
        <div class="hero-right">
            <h1 class="hero-name">
                <span data-field="first_name">{{ portfolio.first_name }}</span>
                <span data-field="last_name">{{ portfolio.last_name }}</span>
            </h1>

            <p class="hero-tagline" data-field="tagline">
                {{ portfolio|field_or_template:"tagline" }}
            </p>
        </div>

    </div>

    <!-- ===== BOTTOM ROW ===== -->
    <div class="hero-bottom">

        <p class="hero-about" data-field="about">
            {{ portfolio|field_or_template:"about" }}
        </p>

        <div class="mt-5 d-flex justify-content-center gap-2 flex-wrap">
            <a data-field="instagram"
               href="{{ portfolio.instagram|default:'#' }}"
               class="social-btn">
                <i class="fa-brands fa-instagram"></i> Instagram
            </a>

            <a data-field="twitter"
               href="{{ portfolio.twitter|default:'#' }}"
               class="social-btn">
                <i class="fa-brands fa-x-twitter"></i> Twitter
            </a>

            <a data-field="website"
               href="{{ portfolio.website|default:'#' }}"
               class="social-btn">
                <i class="fa-solid fa-link"></i> Website
            </a>
        </div>

    </div>

</section>


<!-- ========== PROJECTS SECTION ========== -->
<section class="projects-section">
    <h2 class="fw-bold mb-3" style="font-size:2rem;">Projects</h2>
    <p class="text-muted mb-5">A selection of my work.</p>

    <div class="row g-4" style="width: 100%;">

        <!-- Project 1 -->
        <div class="col-md-4">
            <div class="project-card">
                <h5 class="project-title" data-field="project1_title">
                    {{ portfolio.project1_title }}
                </h5>
                <p class="project-desc" data-field="project1_description">
                    {{ portfolio.project1_description }}
                </p>
                <a data-field="project1_url"
                   href="{{ portfolio.project1_url|default:'#' }}"
                   class="project-btn">Visit Project</a>
            </div>
        </div>

        <!-- Project 2 -->
        <div class="col-md-4">
            <div class="project-card">
                <h5 class="project-title" data-field="project2_title">
                    {{ portfolio.project2_title }}
                </h5>
                <p class="project-desc" data-field="project2_description">
                    {{ portfolio.project2_description }}
                </p>
                <a data-field="project2_url"
                   href="{{ portfolio.project2_url|default:'#' }}"
                   class="project-btn">Visit Project</a>
            </div>
        </div>

        <!-- Project 3 -->
        <div class="col-md-4">
            <div class="project-card">
                <h5 class="project-title" data-field="project3_title">
                    {{ portfolio.project3_title }}
                </h5>
                <p class="project-desc" data-field="project3_description">
                    {{ portfolio.project3_description }}
                </p>
                <a data-field="project3_url"
                   href="{{ portfolio.project3_url|default:'#' }}"
                   class="project-btn">Visit Project</a>
            </div>
        </div>

    </div>
</section>

{% if messages %}
<div style="max-width:700px;margin:0 auto 20px auto;">
    {% for message in messages %}
    <div style="
        padding:12px 16px;
        border-radius:8px;
        margin-bottom:10px;
        font-size:0.95rem;
        color:white;
        background:
            {% if message.tags == 'success' %} #16a34a;
            {% elif message.tags == 'error' %} #dc2626;
            {% else %} #475569;
            {% endif %}
    ">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- ========== CONTACT SECTION ========== -->
<section class="contact-wrapper">

    <h3>Get In Touch</h3>
    <p>Have a project or idea? I’d love to hear from you.</p>

    {% if not preview_mode %}
    <form method="POST" action="{% url 'portfolios:submit_contact_view' portfolio.user.username %}">
    {% else %}
    <form>
    {% endif %}

        {% csrf_token %}
        {{ contact_form.as_p }}

        {% if not preview_mode %}
        <button class="project-btn w-100 mt-3">
            Send Message
        </button>
        {% else %}
        <button class="project-btn w-100 mt-3" disabled>
            Preview Mode (disabled)
        </button>
        {% endif %}
    </form>

</section>

<!-- ========== FOOTER ========== -->
<footer class="footer">
    © <span data-field="first_name">{{ portfolio.first_name }}</span>
      <span data-field="last_name">{{ portfolio.last_name }}</span> — Portfolio
</footer>